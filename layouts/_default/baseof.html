<!doctype html>
<html lang="de">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ .Title }} | {{ .Site.Title }}</title>
  <link rel="icon" href="/favicon.ico">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#1f2937',      // dark grey text
            background: '#f9fafb',   // very light grey background
            accent: {
              blue: '#2563eb',       // blue-600
              red: '#dc2626',        // red-600
            },
            'accent-hover': {
              blue: '#1d4ed8',       // blue-700
              red: '#b91c1c',        // red-700
            },
            muted: '#6b7280',        // grey-500 for muted text
          },
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'sans-serif'],
          },
          maxWidth: {
            'container': '1100px',
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer base {
      /* Typography - Headings */
      article h1 {
        @apply text-3xl sm:text-4xl font-bold text-primary mb-6 mt-8 leading-tight;
      }
      
      article h2 {
        @apply text-2xl sm:text-3xl font-bold text-primary mb-4 mt-8 leading-tight;
      }
      
      article h3 {
        @apply text-xl sm:text-2xl font-semibold text-primary mb-3 mt-6 leading-snug;
      }
      
      article h4 {
        @apply text-lg sm:text-xl font-semibold text-primary mb-3 mt-5 leading-snug;
      }
      
      article h5 {
        @apply text-base sm:text-lg font-semibold text-primary mb-2 mt-4;
      }
      
      article h6 {
        @apply text-base font-semibold text-primary mb-2 mt-4;
      }
      
      /* First heading has no top margin */
      article > h1:first-child,
      article > h2:first-child,
      article > h3:first-child,
      article > h4:first-child,
      article > h5:first-child,
      article > h6:first-child {
        @apply mt-0;
      }
      
      /* Typography - Paragraphs */
      article p {
        @apply text-base text-gray-700 mb-4 leading-relaxed;
      }
      
      article p strong {
        @apply font-semibold text-primary;
      }
      
      article p em {
        @apply italic;
      }
      
      /* Typography - Links */
      article a {
        @apply text-accent-blue hover:text-accent-hover-blue underline transition-colors;
      }
      
      /* Typography - Lists */
      article ul {
        @apply list-disc list-outside ml-6 mb-4 space-y-2;
      }
      
      article ol {
        @apply list-decimal list-outside ml-6 mb-4 space-y-2;
      }
      
      article li {
        @apply text-base text-gray-700 leading-relaxed;
      }
      
      article li > ul,
      article li > ol {
        @apply mt-2 mb-2;
      }
      
      /* Typography - Blockquotes */
      article blockquote {
        @apply border-l-4 border-accent-blue pl-4 py-2 mb-4 italic text-gray-600;
      }
      
      /* Typography - Code */
      article code {
        @apply bg-gray-100 px-1.5 py-0.5 rounded text-sm font-mono text-accent-red;
      }
      
      article pre {
        @apply bg-gray-100 p-4 rounded-lg mb-4 overflow-x-auto;
      }
      
      article pre code {
        @apply bg-transparent p-0 text-sm;
      }
      
      /* Typography - Horizontal Rules */
      article hr {
        @apply border-0 border-t border-gray-200 my-8;
      }
      
      /* Typography - Tables */
      article table {
        @apply w-full mb-4 border-collapse;
      }
      
      article th {
        @apply bg-gray-50 px-4 py-2 text-left font-semibold text-primary border-b-2 border-gray-200;
      }
      
      article td {
        @apply px-4 py-2 border-b border-gray-200 text-gray-700;
      }
      
      article tr:last-child td {
        @apply border-b-0;
      }
      
      /* Typography - Images */
      article img {
        @apply rounded-lg mb-4 max-w-full h-auto;
      }
    }
    
    /* Prevent body scroll when mobile menu is open */
    body.menu-open {
      overflow: hidden;
    }
  </style>
</head>

<body class="bg-background text-primary antialiased">
  <!-- Header -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-40 shadow-sm">
    <div class="max-w-container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <!-- Logo -->
        <a href="{{ .Site.Home.Permalink }}" class="flex-shrink-0 transition-opacity hover:opacity-80">
          <img src="{{ "logo.png" | relURL }}" alt="JSG Hohe Warte Logo" class="h-10 w-auto">
        </a>

        <!-- Desktop Navigation -->
        <nav class="hidden md:flex items-center space-x-8">
          {{ $exclude := slice "impressum" "kontakt" "datenschutz" }}
          {{ range .Site.Sections }}
          {{ if not (in $exclude .Section) }}
          <a href="{{ .RelPermalink }}"
            class="text-sm font-medium transition-colors hover:text-accent-blue {{ if $.CurrentSection }}{{ if eq .RelPermalink $.CurrentSection.RelPermalink }}text-accent-blue font-semibold{{ else }}text-primary{{ end }}{{ else }}text-primary{{ end }}">
            {{ .Title }}
          </a>
          {{ end }}
          {{ end }}
        </nav>

        <!-- Mobile Menu Button -->
        <button id="menuBtn" class="md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors"
          aria-label="Menü öffnen" aria-expanded="false">
          <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Overlay -->
  <div id="mobileMenu" class="fixed inset-0 bg-black/50 hidden z-50 md:hidden transition-opacity">
    <div id="mobileMenuPanel"
      class="absolute right-0 top-0 h-full w-80 max-w-[85vw] bg-white shadow-2xl transform transition-transform duration-300 translate-x-full">
      <div class="flex flex-col h-full">
        <!-- Mobile Menu Header -->
        <div class="flex items-center justify-between p-4 border-b border-gray-200">
          <span class="text-lg font-semibold text-primary">Menü</span>
          <button id="closeBtn" class="p-2 rounded-lg hover:bg-gray-100 transition-colors" aria-label="Menü schließen">
            <svg class="w-6 h-6 text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>

        <!-- Mobile Menu Content -->
        <nav class="flex-1 overflow-y-auto p-4">
          <div class="space-y-1">
            {{ $exclude := slice "impressum" "kontakt" "datenschutz" }}
            {{ $curr := .CurrentSection }}

            {{ range .Site.Sections }}
            {{ if not (in $exclude .Section) }}
            {{ $isActive := and $curr (eq .RelPermalink $curr.RelPermalink) }}

            <div class="space-y-1">
              <a href="{{ .RelPermalink }}"
                class="block px-3 py-2 rounded-lg text-base font-medium transition-colors {{ if $isActive }}bg-accent-blue/10 text-accent-blue{{ else }}text-primary hover:bg-gray-100{{ end }}">
                {{ .Title }}
              </a>

              {{ if $isActive }}
              {{ $children := where .Pages "Kind" "page" }}
              {{ $sorted := sort $children "Weight" "Title" }}
              {{ if $sorted }}
              <div class="ml-3 space-y-1 mt-1">
                {{ range $p := $sorted }}
                <a href="{{ $p.RelPermalink }}"
                  class="block px-3 py-2 rounded-lg text-sm transition-colors {{ if eq $.RelPermalink $p.RelPermalink }}bg-accent-blue/10 text-accent-blue font-medium{{ else }}text-muted hover:bg-gray-100 hover:text-primary{{ end }}">
                  {{ $p.Title }}
                </a>
                {{ end }}
              </div>
              {{ end }}
              {{ end }}
            </div>
            {{ end }}
            {{ end }}
          </div>
        </nav>
      </div>
    </div>
  </div>

  <!-- Subnav (Desktop only) -->
  {{ $current := .CurrentSection }}
  {{ if and (not .IsHome) ($current) }}
  {{ $children := where $current.Pages "Kind" "page" }}
  {{ $sorted := sort $children "Weight" "Title" }}
  {{ if $sorted }}
  <div class="hidden md:block bg-gray-50 border-b border-gray-200">
    <div class="max-w-container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center space-x-6 py-3 overflow-x-auto">
        {{ range $p := $sorted }}
        <a href="{{ $p.RelPermalink }}"
          class="text-sm font-medium whitespace-nowrap transition-colors {{ if eq .RelPermalink $.RelPermalink }}text-accent-red{{ else }}text-muted hover:text-primary{{ end }}">
          {{ $p.Title }}
        </a>
        {{ end }}
      </div>
    </div>
  </div>
  {{ end }}
  {{ end }}

  <!-- Main Content -->
  <main class="max-w-container mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-[60vh]">
    <article>
      {{ block "main" . }}{{ end }}
    </article>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 mt-16">
    <div class="max-w-container mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="text-sm text-muted space-y-4">
        <p>© {{ now.Year }} JSG Hohe Warte · Built with Hugo</p>
        <div class="flex flex-wrap gap-x-4 gap-y-2">
          <a href="/impressum/" class="hover:text-accent-blue transition-colors">Impressum</a>
          <a href="/kontakt/" class="hover:text-accent-blue transition-colors">Kontakt</a>
          <a href="/datenschutz/" class="hover:text-accent-blue transition-colors">Datenschutz</a>
          <a href="https://facebook.com" target="_blank" rel="noopener"
            class="hover:text-accent-blue transition-colors">Facebook</a>
          <a href="https://instagram.com" target="_blank" rel="noopener"
            class="hover:text-accent-blue transition-colors">Instagram</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    const menuBtn = document.getElementById("menuBtn");
    const closeBtn = document.getElementById("closeBtn");
    const mobileMenu = document.getElementById("mobileMenu");
    const mobileMenuPanel = document.getElementById("mobileMenuPanel");
    const body = document.body;

    function openMenu() {
      mobileMenu.classList.remove("hidden");
      body.classList.add("menu-open");
      // Trigger reflow to enable transition
      mobileMenuPanel.offsetHeight;
      mobileMenuPanel.classList.remove("translate-x-full");
      menuBtn.setAttribute("aria-expanded", "true");
    }

    function closeMenu() {
      mobileMenuPanel.classList.add("translate-x-full");
      menuBtn.setAttribute("aria-expanded", "false");
      setTimeout(() => {
        mobileMenu.classList.add("hidden");
        body.classList.remove("menu-open");
      }, 300);
    }

    menuBtn && (menuBtn.onclick = openMenu);
    closeBtn && (closeBtn.onclick = closeMenu);

    // Close menu when clicking overlay
    mobileMenu && (mobileMenu.onclick = (e) => {
      if (e.target === mobileMenu) closeMenu();
    });

    // Close menu on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !mobileMenu.classList.contains('hidden')) {
        closeMenu();
      }
    });
  </script>
</body>

</html>